(self.webpackChunkipydraw=self.webpackChunkipydraw||[]).push([[568],{568:function(e,t,i){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,i,s){void 0===s&&(s=i),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,s){void 0===s&&(s=i),e[s]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||s(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i(657),t),n(i(367),t)},657:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const s=i(306);t.MODULE_VERSION=s.version,t.MODULE_NAME=s.name},367:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasView=t.CanvasModel=void 0;const s=i(565),n=i(657);class a extends s.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:a.model_name,_model_module:a.model_module,_model_module_version:a.model_module_version,_view_name:a.view_name,_view_module:a.view_module,_view_module_version:a.view_module_version,data:"",path:[],line_width:10,size:[200,200],color:!1})}}t.CanvasModel=a,a.serializers=Object.assign({},s.DOMWidgetModel.serializers),a.model_name="CanvasModel",a.model_module=n.MODULE_NAME,a.model_module_version=n.MODULE_VERSION,a.view_name="CanvasView",a.view_module=n.MODULE_NAME,a.view_module_version=n.MODULE_VERSION;class r extends s.DOMWidgetView{constructor(){super(...arguments),this.path=Array.from(this.model.get("path")),this.lastPoint=null,this.drawing=!1,this.onMouseMove=e=>{const t=this.currentPoint(e);this.lastPoint=t,this.drawing&&(this.path.push(t),this.redraw())},this.onMouseDown=e=>{this.lastPoint=this.currentPoint(e),this.drawing=!0,window.addEventListener("mouseup",this.onMouseUp)},this.onMouseUp=e=>{this.drawing=!1,this.path.push(null),this.redraw(),this.sendUpdate(),window.removeEventListener("mouseup",this.onMouseUp)}}render(){this.el.classList.add("ipydraw-canvas"),this.canvas=document.createElement("canvas"),this.canvas.width=this.model.get("size")[0],this.canvas.height=this.model.get("size")[1],this.canvas.style.border="1px solid #ccc",this.context=this.canvas.getContext("2d"),this.context.lineWidth=this.model.get("line_width"),this.context.strokeStyle="black",this.context.lineJoin="round",this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("mousedown",this.onMouseDown),this.el.appendChild(this.canvas),this.el.appendChild(this.createClearButton()),this.model.get("color")&&this.el.appendChild(this.createColorPicker()),this.redraw()}currentPoint(e){const t=this.canvas.getBoundingClientRect();return[e.clientX-t.left,e.clientY-t.top]}redraw(){const e=this.path||[],t=this.context;let i=!1;t.strokeStyle="black";for(const s of[...e,null])null!==s?"string"!=typeof s?i?t.lineTo(...s):(t.moveTo(...s),t.beginPath(),i=!0):t.strokeStyle=s:i&&(t.stroke(),t.closePath(),i=!1)}sendUpdate(){this.model.set("data",this.canvas.toDataURL(),{updated_view:this}),this.model.set("path",Array.from(this.path),{updated_view:this}),this.touch()}createClearButton(){const e=document.createElement("button");return e.onclick=e=>{e.preventDefault(),this.path=[],this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.redraw(),this.sendUpdate()},e.innerText="Clear",e}createColorPicker(){const e=document.createElement("input");e.type="color";for(const t of this.path)"string"==typeof t&&(e.value=t);return e.onchange=e=>{this.path.push(e.currentTarget.value)},e}}t.CanvasView=r},306:e=>{"use strict";e.exports=JSON.parse('{"name":"ipydraw","version":"0.1.1-alpha.0","description":"Simple canvas for ipywidgets","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"unpkg":"dist/index.js","homepage":"https://github.com/travigd/ipydraw","bugs":{"url":"https://github.com/travigd/ipydraw/issues"},"license":"BSD-3-Clause","author":{"name":"Travis DePrato","email":"travis@mynerva.io"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/travigd/ipydraw"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:prod":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack","clean":"yarn run clean:lib && yarn run clean:nbextension && yarn run clean:labextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipydraw/labextension","clean:nbextension":"rimraf ipydraw/nbextension/static/index.js","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"yarn run build:lib","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"^3.2.0","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.0.0","webpack-cli":"^4.0.0"},"jupyterlab":{"extension":"lib/plugin","outputDir":"ipydraw/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);